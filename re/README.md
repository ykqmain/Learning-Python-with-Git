##正则表达式


### 简介

正则表达式(regular expression)描述了一种字符串匹配的模式，可以用来检查一个串是否含有某种子串、将匹配的子串做替换或者从某个串中取出符合某个条件的子串等。

* 测试字符串内的模式。

* 替换文本。

* 基于模式匹配从字符串中提取子字符串。

<br><br>


### 语法

正则表达式是由**普通字符**（例如字符 a 到 z）以及**特殊字符**（称为"元字符"）组成的文字模式。模式描述在搜索文本时要匹配的一个或多个字符串。正则表达式作为一个模板，将某个字符模式与所搜索的字符串进行匹配。

<br>

#### 普通字符

包括所有大写和小写字母、所有数字、所有标点符号和一些其他符号。

<br>

#### 特殊字符

许多元字符要求在试图匹配它们时特别对待。若要匹配这些特殊字符，必须首先使字符"转义"，即，将反斜杠字符 (\) 放在它们前面。

特别字符 | 描述
-----|-----
  $  | 匹配输入字符串的结尾位置
 ( ) | 标记一个子表达式的开始和结束位置
 *   | 匹配前面的子表达式零次或多次
 +   | 匹配前面的子表达式一次或多次
 .   | 匹配除换行符 \n 之外的任何单字符
 [   | 标记一个中括号表达式的开始
 ?   | 匹配前面的子表达式零次或一次，或指明一个非贪婪限定符
 \   | 将下一个字符标记为或特殊字符、或原义字符、或向后引用、或八进制转义符
 ^   | 匹配输入字符串的开始位置，除非在方括号表达式中使用，此时它表示不接受该字符集合
 {   | 标记限定符表达式的开始
 |   | 指明两项之间的一个选择

<br>

#### 限定符

限定符用来指定正则表达式的一个给定组件必须要出现多少次才能满足匹配。有*或+或?或{n}或{n,}或{n,m}共6种。

字符 | 描述
-----|-----
*     | 匹配前面的子表达式零次或多次
+     | 匹配前面的子表达式一次或多次
?     | 匹配前面的子表达式零次或一次
{n}   | n 是一个非负整数。匹配确定的 n 次。例如，'o{2}' 不能匹配 "Bob" 中的 'o'，但是能匹配 "food" 中的两个 o。
{n,}  | n 是一个非负整数。至少匹配n 次。例如，'o{2,}' 不能匹配 "Bob" 中的 'o'，但能匹配 "foooood" 中的所有 o。'o{1,}' 等价于 'o+'。'o{0,}' 则等价于 'o*'。
{n,m} | m 和 n 均为非负整数，其中n <= m。最少匹配 n 次且最多匹配 m 次。例如，"o{1,3}" 将匹配 "fooooood" 中的前三个 o。'o{0,1}' 等价于 'o?'。请注意在逗号和两个数之间不能有空格。

<br>

#### 定位符

定位符使您能够将正则表达式固定到行首或行尾。它们还能够创建这样的正则表达式，这些正则表达式出现在一个单词内、在一个单词的开头或者一个单词的结尾。

定位符用来描述字符串或单词的边界，^和$分别指字符串的开始与结束，\b描述单词的前或后边界，\B表示非单词边界。

字符 | 描述
-----|-----
^    | 匹配输入字符串开始的位置。如果设置了 RegExp 对象的 Multiline 属性，^ 还会与 \n 或 \r 之后的位置匹配。
$    | 匹配输入字符串结尾的位置。如果设置了 RegExp 对象的 Multiline 属性，$ 还会与 \n 或 \r 之前的位置匹配。
\b   | 匹配一个字边界，即字与空格间的位置。
\B   | 非字边界匹配。

**注意**：不能将限定符与定位点一起使用。

由于在紧靠换行或者字边界的前面或后面不能有一个以上位置，因此不允许诸如 ^* 之类的表达式。

若要匹配一行文本开始处的文本，请在正则表达式的开始使用 ^ 字符。不要将 ^ 的这种用法与中括号表达式内的用法混淆。

若要匹配一行文本的结束处的文本，请在正则表达式的结束处使用 $ 字符。

<br>

#### 非打印字符

字符  |  描述
-----|-----
\cx  | 匹配由x指明的控制字符。例如， \cM 匹配一个 Control-M 或回车符。x 的值必须为 A-Z 或 a-z 之一。否则，将 c 视为一个原义的 'c' 字符。
\s   | 匹配任何空白字符，包括空格、制表符、换页符等等。(等价于 [ \f\n\r\t\v])
\S   | 非空白字符。(等价于 [^ \f\n\r\t\v])
\n   | 换行 (\x0a 或 \cJ)
\r   | 回车 ( \x0d 或 \cM)
\t   | 制表符 (\x09 或 \cI)
\v   | 垂直制表符 (\x0b 或 \cK)
\f   | 换页 (\x0c 或 \cL)

<br>

#### 选择

用圆括号将所有选择项括起来，相邻的选择项之间用|分隔。

但用圆括号会有一个副作用，是相关的匹配会被缓存，此时可用?:放在第一个选项前来消除这种副作用。

其中?:是非捕获元之一，还有两个非捕获元是?=和?!，这两个还有更多的含义，前者为正向预查，在任何开始匹配圆括号内的正则表达式模式的位置来匹配搜索字符串，后者为负向预查，在任何开始不匹配该正则表达式模式的位置来匹配搜索字符串。

<br>

#### 反向引用

对一个正则表达式模式或部分模式两边添加圆括号将导致相关匹配存储到一个临时缓冲区中，所捕获的每个子匹配都按照在正则表达式模式中从左到右出现的顺序存储。

缓冲区编号从 1 开始，最多可存储 99 个捕获的子表达式。每个缓冲区都可以使用 '\n' 访问，其中 n 为一个标识特定缓冲区的一位或两位十进制数。

可以使用非捕获元字符 '?:'、'?=' 或 '?!' 来重写捕获，忽略对相关匹配的保存。

<br><br>

